<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GraphQOL Security Workbench</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/app.css') }}" />
    <script src="https://cdn.jsdelivr.net/npm/cytoscape@3.30.2/dist/cytoscape.min.js"></script>
  </head>
  <body>
    <header>
      <h1>GraphQOL Security Workbench</h1>
      <p>Engine fingerprinting, GraphQL-Cop-equivalent auditing, schema mapping, and query execution.</p>
    </header>

    <main>
      <section class="panel controls">
        <h2>Target Configuration</h2>
        <label for="target">Target GraphQL endpoint</label>
        <input id="target" type="url" placeholder="https://example.com/graphql" />

        <label for="headers">Optional headers JSON</label>
        <textarea id="headers" rows="4" placeholder='{"Authorization":"Bearer token"}'></textarea>

        <button id="analyze">Run Security + Schema Analysis</button>
        <div id="analysis-status" class="muted">No analysis executed yet.</div>
      </section>

      <section class="panel">
        <h2>Engine Identification</h2>
        <div id="engine-summary" class="muted">No engine detected yet.</div>
        <ul id="engine-notes"></ul>
      </section>

      <section class="panel">
        <h2>GraphQL Cop-Equivalent Audit</h2>
        <div id="audit-summary" class="muted">No audit executed yet.</div>
        <pre id="audit-output"></pre>
      </section>

      <section class="panel">
        <h2>Schema Objects</h2>
        <div id="objects-summary" class="muted">No schema loaded yet.</div>
        <div id="objects-list" class="object-list"></div>
      </section>

      <section class="panel graph-panel">
        <h2>Interactive Schema Graph</h2>
        <div id="graph-status" class="muted">No graph loaded yet.</div>
        <div id="schema-graph"></div>
      </section>

      <section class="panel query-panel">
        <h2>Query Runner</h2>
        <label for="query">GraphQL Query</label>
        <textarea id="query" rows="6" placeholder="query { __typename }"></textarea>

        <label for="variables">Variables JSON (optional)</label>
        <textarea id="variables" rows="4" placeholder='{"id": "123"}'></textarea>

        <label for="operationName">Operation Name (optional)</label>
        <input id="operationName" type="text" placeholder="MyQuery" />

        <button id="run-query">Run Query</button>
        <pre id="query-output"></pre>
      </section>
    </main>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
  </body>
</html>
